if(typeof(AwcCasinoHandler)=="undefined"){AwcCasinoHandler={}}(function(){AwcCasinoHandler.init=function(c,b){AwcCasinoHandler.bindEvent();AwcCasinoHandler.login(c,b)};AwcCasinoHandler.bindEvent=function(){$j("#iframeDiv").hide();$j(window).on("beforeunload",function(b){Trace.log("Close window and logout user!")});$j(".pop-close").on("click",function(){AwcCasinoHandler.logout()})};AwcCasinoHandler.login=function(c,b){$j.ajax({type:"POST",url:"/exchange/member/vendorController/login",data:{platform:c,gameType:b,vendorSite:VendorSiteType.AWC.value},beforeSend:function(){JsCache.get("#loading").show()},complete:function(){JsCache.get("#loading").hide()},success:function(d){if(d==null){return}if(d.error){NoticeHandler.error(d.error);return}if(d.success){var e=$j("#iframeDiv");e.append('<iframe src="'+d.success+'" width="100%" height="100%" scrolling="yes" ></iframe>');e.show()}}})};AwcCasinoHandler.logout=function(){$j.ajax({type:"POST",url:"/exchange/member/vendorController/logout",data:{vendorSite:VendorSiteType.AWC.value},beforeSend:function(){JsCache.get("#loading").show()},complete:function(){JsCache.get("#loading").hide()},success:function(b){alert("Logout success");window.close()}})};function a(){Trace.log("[fresh iframe]");var b=$j("#iframeDiv");b.src=b.src}})();