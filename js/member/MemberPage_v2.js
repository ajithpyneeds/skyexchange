var MessageUtils={};(function(){MessageUtils.showThenGoToIndex=function(a){NoticeHandler.info(a);setTimeout(function(){var b=EventType.getInstanceOf(PageConfig.selectEventType);if(b!=null){if(b.isRacingEvent()){location="/exchange/member/"+b.name.replace("_","-").toLowerCase()}else{location=PageConfig.sportsPath+"?eventType="+b.value}}else{location=PageConfig.sportsPath}},3000)}})();var HighlightsHandler={};(function(){HighlightsHandler.selectHighlights=function(d,b){JsCache.get("#eventBoard").empty();PageConfig.highlightEventType=b;var a=DataBase.events.queryAll(b);if(a==null||a.length==0){}var c="";JsCache.get("#eventBoard").find("[id^=highLightEvent_]").each(function(){if(c.length==0){c+=this.id.replace("highLightEvent_","")}else{c+=(","+this.id.replace("highLightEvent_",""))}});$j.ajax({type:"POST",dataType:"JSON",url:PageConfig.queryEventsWithMarketPath,data:{eventType:PageConfig.highlightEventType,competitionId:-1,eventTs:-1,marketTs:-1,selectionTs:-1,collectEventIds:c},success:function(f){JsCache.get("#loading").hide();try{DataBase.events.update(f.events);EventHandler.updateEvents()}catch(g){Trace.printStackTrace(g)}},error:function(){JsCache.get("#loading").hide()}});EventHandler.updateEvents();JsCache.get("#highlightLabel").find("a").removeClass("select");$j(d).addClass("select")}})();var MemberPage={};(function(){MemberPage.init=function(){if(PageConfig.isTodaysCard==1){NavigationHandler.getMenu(PageConfig.selectEventType,true,1)}else{if(PageConfig.selectEventType==-1){MemberPage.viewHome()}else{MemberPage.selectSport(PageConfig.selectEventType)}}};MemberPage.viewHome=function(){TabMenuHandler.updateSelect("tabMenu","menu_Home");var e=$j(".kv-wrap");var f="/images/kv/KV.jpg";e.find("img").attr("src",f);e.show();$j("[id^=sport_]").remove();$j("[id^=competition_]").remove();$j("[id^=countryCode_]").remove();$j("[id^=leftside_event_]").remove();$j("[id^=leftside_market_]").remove();NavigationBar.init();NavigationHandler.init();if(PageConfig.highlightEventType!=EventType.CRICKET.value){if(PageConfig.webSiteType!=WebSiteType.FAIRENTER.unique()&&PageConfig.webSiteType!=WebSiteType.KINGFAIR24.unique()){PageConfig.highlightEventType=EventType.CRICKET.value}}$j("[id^='highLightEvent_']").remove();PageConfig.selectEventType=-1;PageConfig.selectEventId=-1;PageConfig.selectMarketId=null;MemberPage.view("list");$j("#highlightLabel li a").removeClass("select");$j("#highlightTab"+PageConfig.highlightEventType).addClass("select");$j("#highlightLabel").show();EventHandler.eventTsMap.put(PageConfig.highlightEventType,-1);EventHandler.marketTsMap.put(PageConfig.highlightEventType,-1);EventHandler.selectionTsMap.put(PageConfig.highlightEventType,-1);TxnHandler.updateOpenBetSelectionBox();TxnHandler.addBlankSelectOption(PageConfig.selectEventId,PageConfig.selectMarketId);if(!PageConfig.isHideUpcomingHorseRace){UpcomingHandler.init()}UiUtils.appendHeight(true);if(PageConfig.ENABLE_ONE_CLICK_BET=="true"){OneClickBetHandler.show()}};MemberPage.selectSport=function(g){var f=$j(".kv-wrap");f.find("img").attr("src",b(g));$j("[id^=sport_]").remove();$j("[id^=competition_]").remove();$j("[id^=countryCode_]").remove();$j("[id^=leftside_event_]").remove();$j("[id^=leftside_market_]").remove();PageConfig.selectEventType=g;PageConfig.selectEventId=-1;PageConfig.selectMarketId=null;if(PageConfig.highlightEventType!=g){PageConfig.highlightEventType=g}$j("[id^='highLightEvent_']").remove();TabMenuHandler.updateSelect("tabMenu","menu_"+EventType.getInstanceOf(g).name);var h=I18N.get("eventType.name."+EventType.getInstanceOf(g).name);NavigationBar.init();NavigationBar.addNode({id:g,type:"EVENT_TYPE",name:h});NavigationHandler.getMenu([g]);MemberPage.view("list");$j("#highlightLabel").hide();var e=DataBase.events.queryAll(g);if(e==null||e.length==0){}else{EventHandler.updateEvents()}EventHandler.eventTsMap.put(g,-1);EventHandler.marketTsMap.put(g,-1);EventHandler.selectionTsMap.put(g,-1);TxnHandler.updateOpenBetSelectionBox();TxnHandler.addBlankSelectOption(PageConfig.selectEventId,PageConfig.selectMarketId);UiUtils.appendHeight(true);if(PageConfig.ENABLE_ONE_CLICK_BET=="true"){OneClickBetHandler.show()}};function b(f){var e=EventType.getInstanceOf(f);if(e!=null&&e.images!=null){return e.images}return null}function d(h,k){var g=$j("#gameHead");var i=JsCache.get("#gameTeam");i.find("#noTeam").hide();i.find("#twoTeam").hide();var e=h.name;var j=k.marketName;var f=" v ";if(e.indexOf(" vs ")>=0){f=" vs "}else{if(e.indexOf(" @ ")>=0){f=" @ "}}if(e.split(f).length>1){i.find("#gameVisit").html(e.split(f)[0]+"<span></span>");i.find("#gameVs").html("<div>"+j+"<span>"+f.trim()+"</span></div>");i.find("#gameHome").html(e.split(f)[1]+"<span></span>");i.find("#noTeam").hide();i.find("#twoTeam").show()}else{i.find(".game-name").html(e+"<span>"+j+"</span>");i.find("#noTeam").show();i.find("#twoTeam").hide()}if(PageConfig.ENABLE_LINE_MARKET){if(MarketUtil.isLineMarket(k.marketType,k.bettingType)){i.addClass("line_markets-team");g.find("#lineMarketRulesBtn").show()}else{i.removeClass("line_markets-team");g.find("#lineMarketRulesBtn").hide()}}}MemberPage.selectMarket=function(h,e,n){var m=PageConfig.isTodaysCard==1?true:false;if(PageConfig.selectMarketId!=n){MessageUtils.showThenGoToIndex("marketId not match");return}var p=EventType.getInstanceOf(h);var f=DataBase.events.get(h,e);var l=DataBase.markets.get(e,n);if((l==null||f==null)&&m==true&&p!=null&&p.isRacingEvent()){MemberPage.view("marketClose");NavigationBar.addTodaysCardNode(h);NavigationHandler.getMenu([h],false,1,e,n);return}if(f==null&&m==false){MessageUtils.showThenGoToIndex("event is not available");return}if(l==null&&m==false){MessageUtils.showThenGoToIndex("market is not available");return}PageConfig.uiSelect={};PageConfig.uiSelect.act="selectMarket";PageConfig.uiSelect.competitionName=PageConfig.selectCompetitionName;PageConfig.uiSelect.eventType=h;PageConfig.uiSelect.eventId=e;PageConfig.uiSelect.marketId=n;CookieUtil.setCookie(PageConfig.uiCookie,JSON.stringify(PageConfig.uiSelect),-1);$j("[id^='highLightEvent_']").remove();$j("[id^=fullSelection_]").remove();if(NavigationHandler.navigationIds.length>=1&&(NavigationHandler.navigationIds[0]!=h||NavigationHandler.navigationIds[NavigationHandler.navigationIds.length-1]!=e)&&m==false){NavigationHandler.navigationIds=[]}if(NavigationHandler.navigationIds.length==0&&m==false){NavigationBar.init();if(PageConfig.fcId!=null){NavigationHandler.getNavigationPathFully(h,PageConfig.fcId)}else{if(EventType.ELECTION.unique()==h){NavigationHandler.getMenu([h],true)}else{NavigationHandler.getNavigationPathFully(h,e)}}}else{JsCache.get("#listBoard").find("li").removeClass("select");$j("#naviMenu_"+n.replace(".","_")).addClass("select")}if(m==true){NavigationBar.addTodaysCardNode(h);NavigationHandler.getMenu([h],false,1,e,n)}TabMenuHandler.updateSelect("tabMenu","menu_"+EventType.getInstanceOf(h).name);if(LiveMatchTrackerHandler.isEnableLiveMatchTracker(h)){MemberPage.view("liveMatchTracker")}else{if(f.scores!=null&&LiveScoreHandler.isEnableLiveScore()){MemberPage.view("marketLiveScore");var o=JsCache.get("#scoresEvent");o.html(l.marketName+'<img src="/images/transparent.gif">');LiveScoreHandler.appendInfo(f.scores,f.matchInfo,f.scoresDetail,f.timeElapsed,h,e,n)}else{MemberPage.view("market");MultiMarketsHandler.appendGameHeadPin(h,e,n)}}d(f,l);PageConfig.selectEventType=h;PageConfig.selectEventId=e;PageConfig.selectMarketId=n;TxnHandler.updateOpenBetSelectionBox();TxnHandler.addBlankSelectOption(PageConfig.selectEventId,PageConfig.selectMarketId);PopularMarketHandler.init();PopularMarketHandler.appendAllTab();if(p!=null&&(p.isRacingEvent())){NavigationHandler.updateTabMarket()}UiUtils.appendHeight();if(PageConfig.ENABLE_ONE_CLICK_BET=="true"){OneClickBetHandler.show()}if(FullMarketViewHandler.isEnableFullMarketWebSocket()){var k=l.inPlay;var j=l.marketType;if(j=="MATCH_ODDS"&&k==1){FullMarketViewHandler.initWebSocket()}}if(PageConfig.ENABLE_LINE_MARKET){var g=$j("#betSlipBoard");var i=g.find("[name=slipHeader]");if(MarketUtil.isLineMarket(l.marketType,l.bettingType)){i.find("#oddsHeader").hide();i.find("#runsHeader").show()}else{i.find("#oddsHeader").show();i.find("#runsHeader").hide()}}};MemberPage.multiMarkets=function(){if(MultiMarketsHandler.isHasMultiMarket()==false){$j("#noMultiMarkets").show()}else{$j("#noMultiMarkets").hide()}TabMenuHandler.updateSelect("tabMenu","menu_MultiMarkets");PageConfig.highlightEventType=-1;PageConfig.selectEventType=-1;PageConfig.selectEventId=-1;PageConfig.selectMarketId=null;$j("[name=multiMarketItem]").remove();MemberPage.view("multiMarkets");NavigationBar.init();NavigationHandler.init();MultiMarketsHandler.getMultiMarket();var e=JsCache.get("#upcomingHorseRace");if(e&&e.is(":visible")){e.hide()}UiUtils.appendHeight(true);if(PageConfig.ENABLE_ONE_CLICK_BET=="true"){OneClickBetHandler.show()}if(MultiMarketsHandler.isEnableMultiMarketWebSocket()){MultiMarketsHandler.initWebSocket()}};var a=[{name:"list",elem:[".kv-wrap","#gameHighlightWrap"]},{name:"today",elem:[".function-wrap","#sportListWrap"]},{name:"market",elem:[]},{name:"marketClose",elem:["#marketClosedWrap"]},{name:"marketLiveScore",elem:[".game-scores","#scoresEvent"]},{name:"multiMarkets",elem:["#multiMarketsWrap"]},{name:"liveMatchTracker",elem:["#liveMatchGameHead"]}];var c=[{elem:".col-left",views:["list","market","marketClose","marketLiveScore","multiMarkets","liveMatchTracker"]},{elem:"#gameHead",views:["market","marketLiveScore"]},{elem:"#gameTeam",views:["market"]},{elem:".game-info",views:["market","marketLiveScore","liveMatchTracker"]},{elem:".game-matched",views:["market","marketLiveScore","liveMatchTracker"]},{elem:"#fullMarketEventLeft",views:["market","marketLiveScore","liveMatchTracker"]},{elem:"#fullMarketEventRight",views:["market","marketLiveScore","liveMatchTracker"]},];MemberPage.view=function(l){if(l=="inPlay"){$j(".col-center").addClass("inplay");$j("[id^='inPlayEventType_']").show()}else{if(l=="today"){$j(".col-center").addClass("inplay");$j("[id^='inPlayEventType_']").hide()}else{if(l=="market"||l=="marketClose"||l=="marketLiveScore"||l=="liveMatchTracker"){$j(".col-center").addClass("markets")}else{$j("[id^='inPlayEventType_']").hide();$j(".col-center").removeClass("inplay");$j(".col-center").removeClass("markets")}}}if(l=="liveMatchTracker"){$j("#overWrap").addClass("live-match")}else{$j("#overWrap").removeClass("live-match")}for(var f=0;f<a.length;f++){for(var k=0;k<a[f]["elem"].length;k++){var g=a[f]["elem"][k];if(l==a[f]["name"]){if($j(g)!=null){$j(g).show()}else{Trace.error(g+" not found")}}else{if($j(g)!=null){$j(g).hide()}else{Trace.error(g+" not found")}}}}for(var h=0;h<c.length;h++){var g=c[h]["elem"];for(var e=0;e<c[h]["views"].length;e++){if(l==c[h]["views"][e]){$j(g).show();break}$j(g).hide()}}}})();var isEqual=function(b,a){return JSON.stringify(b)===JSON.stringify(a)};if(typeof(DataBase)=="undefined"){DataBase={}}(function(){DataBase.sports={};var b=new TreeMap();DataBase.sports.update=function(f){for(var d=0;d<f.length;d++){var e=f[d];e.name=I18N.get("eventType.name."+EventType.getInstanceOf(e.id).name);b.put(e.id,e)}};DataBase.sports.get=function(d){return b.get(d)};DataBase.sports.queryAll=function(){return b.values()};DataBase.sports.sort=function(){b.sort(function(e,d){return e.value.name.localeCompare(d.value.name)})};DataBase.competitions={};var a=new TreeMap();DataBase.competitions.update=function(e,h){var g=a.get(e);if(g==null){g=new TreeMap();a.put(e,g)}for(var d=0;d<h.length;d++){var f=h[d];g.put(f.id,f)}};DataBase.competitions.get=function(d,f){var e=a.get(d);if(e==null){e=new TreeMap();a.put(d,e)}return e.get(f)};DataBase.competitions.queryAll=function(d){var e=a.get(d);if(e==null){e=new TreeMap();a.put(d,e)}return e.values()};DataBase.competitions.size=function(d){return a.get(d).length};DataBase.competitions.sort=function(d){var e=a.get(d);if(e==null){e=new TreeMap();a.put(d,e);return}e.sort(function(g,f){return g.value.name.localeCompare(f.value.name)})};DataBase.countryCodes={};var c=new TreeMap();DataBase.countryCodes.update=function(g,f){var h=c.get(g);if(h==null){h=new TreeMap();c.put(g,h)}for(var e=0;e<f.length;e++){var d=f[e];h.put(d.code,d)}};DataBase.countryCodes.get=function(d,e){if(c.get(d)==null){return null}return c.get(d).get(e)};DataBase.countryCodes.queryAll=function(d){var e=c.get(d);if(e==null){e=new TreeMap();c.put(d,e)}return e.values()};DataBase.countryCodes.sort=function(){c.sort(function(e,d){return e.value.code.localeCompare(d.value.code)})}})();