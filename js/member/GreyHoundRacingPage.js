var GreyHoundRacingPage={};(function(){GreyHoundRacingPage.marketTs=-1;GreyHoundRacingPage.tabChanged=false;GreyHoundRacingPage.selectDayType="today";function a(d){var c=function(f){try{if(f.marketTs>GreyHoundRacingPage.marketTs){GreyHoundRacingPage.marketTs=f.marketTs}RacingSportUtil.initRenderRacing(f.events);if(JsCache.get("#contentBox").find("div").length==0){$j("#noDataDiv").show()}else{$j("#noDataDiv").hide()}}catch(g){Trace.printStackTrace(g)}finally{setTimeout(function(){JsCache.get("#loading").hide()},250)}};RacingSportUtil.initQueryRacingByDay(d,EventType.GREYHOUND_RACING.value,c)}GreyHoundRacingPage.init=function(){if(location.hash!="#Today"&&location.hash!="#Tomorrow"&&location.hash!="#AftTomorrow"){location.hash="#Today";location.reload();return}$j(window).bind("hashchange",function(){var c=location.hash;if(c==""){location.hash="#Today";location.reload();return}GreyHoundRacingPage.route(c)});GreyHoundRacingPage.route(location.hash)};GreyHoundRacingPage.initMenu=function(){NavigationBar.addNode({id:EventType.GREYHOUND_RACING.value,type:"EVENT_TYPE",name:"Greyhound Racing"});NavigationHandler.getMenu([EventType.GREYHOUND_RACING.value])};GreyHoundRacingPage.route=function(c){if(c=="#Today"){TabMenuHandler.updateSelect("daySelectTab",c.substring(1).toLowerCase());GreyHoundRacingPage.viewToday()}else{if(c=="#Tomorrow"){TabMenuHandler.updateSelect("daySelectTab",c.substring(1).toLowerCase());GreyHoundRacingPage.viewTomorrow()}else{if(c=="#AftTomorrow"){TabMenuHandler.updateSelect("daySelectTab",c.substring(1).toLowerCase());GreyHoundRacingPage.viewAftTomorrow()}else{JsCache.get("#loading").hide()}}}};GreyHoundRacingPage.viewToday=function(){GreyHoundRacingPage.tabChanged=true;GreyHoundRacingPage.selectDayType="today";JsCache.get("#contentBox").children().remove();a("today")};GreyHoundRacingPage.viewTomorrow=function(){GreyHoundRacingPage.tabChanged=true;GreyHoundRacingPage.selectDayType="tomorrow";JsCache.get("#contentBox").children().remove();a("tomorrow")};GreyHoundRacingPage.viewAftTomorrow=function(){GreyHoundRacingPage.tabChanged=true;GreyHoundRacingPage.selectDayType="aftTomorrow";JsCache.get("#contentBox").children().remove();a("aftTomorrow")};GreyHoundRacingPage.updateMarketsTask=null;GreyHoundRacingPage.initUpdateGreyHoundRacingMarkets=function(){GreyHoundRacingPage.updateGreyHoundRacingMarkets=TaskExecuter.createTask(PageConfig.updateGreyHoundRacingMarketsCycleTime,2,function(){b(this)});GreyHoundRacingPage.updateGreyHoundRacingMarkets.run();TaskExecuter.execute()};function b(c){$j.ajax({type:"POST",dataType:"JSON",url:PageConfig.landingPath+"/member/playerService/queryRacingByDay",data:{dayType:GreyHoundRacingPage.selectDayType,eventType:EventType.GREYHOUND_RACING.value,marketTs:GreyHoundRacingPage.marketTs},success:function(d){try{if(GreyHoundRacingPage.tabChanged){GreyHoundRacingPage.marketTs=-1;GreyHoundRacingPage.tabChanged=false;return}if(d.marketTs>GreyHoundRacingPage.marketTs){GreyHoundRacingPage.marketTs=d.marketTs}if(d.events.length>0){RacingSportUtil.updateMarkets(d.events)}}catch(f){Trace.printStackTrace(f)}finally{c.check();TaskExecuter.execute()}},error:function(){c.check();TaskExecuter.execute()}})}})();