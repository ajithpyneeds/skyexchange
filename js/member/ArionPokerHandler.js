if(typeof(ArionPokerHandler)=="undefined"){ArionPokerHandler={}}(function(){ArionPokerHandler.init=function(){ArionPokerHandler.bindInitEvent()};ArionPokerHandler.bindInitEvent=function(){$j("#pokerLoginBtn").on("click",function(){if(PageConfig.isMobileOrTablet){if(!MobileLoginHandler.userIsLogin()){return}}else{if(typeof(LoginHandler)!="undefined"&&!LoginHandler.userIsLogin()){return}}ArionPokerHandler.openDepositPage()});$j("#pokerDeposit").keydown(function(b){var a=b.which;if(KeyEventUtils.isNumberKey(b)||KeyEventUtils.isBackspaceKey(a)||KeyEventUtils.isDeleteKey(a)||KeyEventUtils.isArrowKey(a)||KeyEventUtils.isTabKey(a)||KeyEventUtils.isEnterKey(a)){return}WindowEventUtil.stopEvent(b)});$j("#pokerDeposit").keyup(function(a){if($j("#pokerDeposit").val()>PageConfig.pokerMaxDeposit){$j("#pokerErrorMsg").show()}else{$j("#pokerErrorMsg").hide();$j("#pokerPreCompute").html(MathUtil.decimal.multiply(PageConfig.pokerRate,$j(this).val()))}});JsCache.get("#transfer_to_go").find("[id^=selectStake_]").unbind("mousedown").mousedown(function(d){var b=parseInt($j("#pokerDeposit").val())||0;if(b<PageConfig.pokerMaxDeposit){var c=$j(this);var f=parseInt(c.attr("stake"));var a=b+f;$j("#pokerDeposit").val(a);$j("#pokerPreCompute").html(MathUtil.decimal.multiply(PageConfig.pokerRate,a));if(a>PageConfig.pokerMaxDeposit){$j("#pokerErrorMsg").show()}}WindowEventUtil.stopEvent(d)})};ArionPokerHandler.bindCloseButtonEvent=function(){$j("#closePoker, #cancelPoker").on("click",function(){ArionPokerHandler.unBindEvent();$j("#transfer_to_go").hide();$j("#pokerErrorMsg").hide()})};ArionPokerHandler.bindLoginButtonEvent=function(){$j("#pokerDeposit").prop("disabled",false);$j("#pokerDepositAndLogin, #cancelPoker").removeClass("disable");$j("#pokerDepositAndLogin").on("click",function(){ArionPokerHandler.loginAndDeposit()})};ArionPokerHandler.unBindEvent=function(){$j("#pokerDeposit").prop("disabled",true);$j("#pokerDepositAndLogin, #cancelPoker").addClass("disable");$j("#closePoker, #cancelPoker, #pokerDepositAndLogin").unbind("click")};ArionPokerHandler.openDepositPage=function(){$j("#cancelPoker").removeClass("disable");$j("#pokerDepositAndLogin").addClass("disable");ArionPokerHandler.bindCloseButtonEvent();$j("#pokerDeposit").val("");$j("#pokerPreCompute").html("0");$j.ajax({type:"POST",url:"/exchange/member/vendorController/queryVendorCurrencyInfo",data:{vendorSite:VendorSiteType.ARION.value},beforeSend:function(){},complete:function(){},success:function(b){if(b==null){return}if(b.error){ArionPokerHandler.showMessage(b.error)}else{var a=CurrencyType.getInstanceOf(b.currencyType);$j("#vendorBalance").html(ArionPokerHandler.formatCurrency(a,b.vendorPlayerBalance,0));$j("#pokerBalance").html(a.name+" "+ArionPokerHandler.formatCurrency(a,b.betCredit),2);$j("#pokerRate").html("1"+a.name+" = "+b.rate+" points");PageConfig.pokerRate=b.rate;PageConfig.pokerMaxDeposit=b.betCredit;$j.each(JSON.parse(b.stakeSetting),function(c,d){$j("#selectStake_"+c).attr("stake",d).html(d)});if(b.isEnableVendorLogin){ArionPokerHandler.bindLoginButtonEvent()}}}});$j("#transfer_to_go").css("display",PageConfig.isMobileOrTablet?"flex":"block")};ArionPokerHandler.deposit=function(b){var a=false;if(b>0){$j.ajax({type:"POST",async:false,url:"/exchange/member/vendorController/deposit",data:{vendorSite:VendorSiteType.ARION.value,depositBalance:b},beforeSend:function(){JsCache.get("#poker_loading").show()},complete:function(){JsCache.get("#poker_loading").hide()},success:function(c){if(c==null){return}if(c.error){ArionPokerHandler.showMessage(c.error);ArionPokerHandler.bindCloseButtonEvent();ArionPokerHandler.bindLoginButtonEvent()}else{a=true}}})}else{a=true}return a};ArionPokerHandler.loginAndDeposit=function(){var b=$j("#pokerDeposit").val()==""?0:$j("#pokerDeposit").val();if(b>PageConfig.pokerMaxDeposit){$j("#pokerErrorMsg").show();return}ArionPokerHandler.unBindEvent();var a=null;$j.ajax({type:"POST",url:"/exchange/member/vendorController/login",data:{vendorSite:VendorSiteType.ARION.value},async:false,beforeSend:function(){JsCache.get("#poker_loading").show()},complete:function(){JsCache.get("#poker_loading").hide()},success:function(e){if(e==null){return}if(e.error){ArionPokerHandler.showMessage(e.error);ArionPokerHandler.bindCloseButtonEvent();ArionPokerHandler.bindLoginButtonEvent();return}if(e.success){var d=true;if(b>0){d=ArionPokerHandler.deposit(b)}if(d){a=e.success;$j("#transfer_to_go").hide()}}}});if(a!=null){if(PageCommonConfig.isApp){location=a}else{var c=window.open(a,"_blank");if(c==null||typeof(c)=="undefined"){alert("Open new window fail, please confirm your browser")}}}};ArionPokerHandler.validatePageNumber=function(a){var b=a.value;a.value=b.replace(/[\D]|^0[\d]+/,"")};ArionPokerHandler.formatCurrency=function(a,e,b){var c=function(h,g){var f=StringUtil.getlength(StringUtil.trim(g.currencySymbol))==0?"":g.currencySymbol;if(h.indexOf("-")==0){return"("+f+h.replace("-","")+")"}return f+h};var d={precision:b,separateSign:",",currencySymbol:a.symbol,formatter:c,"trailingZeros,":false};return CurrencyUtil.formatter(e,d)};ArionPokerHandler.withdrawAllFromArionPoker=function(){$j.ajax({type:"POST",dataType:"JSON",url:"/exchange/member/vendorController/withdraw",data:{vendorSite:VendorSiteType.ARION.value,isWithdrawAll:true},success:function(a){if(a==null){return}if(a.error){return}if(a.success){return}}})};ArionPokerHandler.showMessage=function(a){if(PageConfig.isMobileOrTablet){alert(a)}else{NoticeHandler.error(a)}}})();