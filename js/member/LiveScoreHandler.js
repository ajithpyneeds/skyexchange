if(typeof(LiveScoreHandler)=="undefined"){LiveScoreHandler={}}(function(){LiveScoreHandler.isEnableLiveScore=function(){return(EventType.CRICKET.unique()==PageConfig.selectEventType||EventType.TENNIS.unique()==PageConfig.selectEventType||EventType.SOCCER.unique()==PageConfig.selectEventType)};LiveScoreHandler.getBoardByEventType=function(p){$j(".game-scores").hide();if(EventType.CRICKET.unique()==p){return JsCache.get("#cricketScoreBoard").show()}else{if(EventType.TENNIS.unique()==p){return JsCache.get("#tennisScoreBoard").show()}else{if(EventType.SOCCER.unique()==p){return JsCache.get("#soccerScoreBoard").show()}}}};LiveScoreHandler.appendInfo=function(r,z,u,s,q,p,y){var x=LiveScoreHandler.getBoardByEventType(PageConfig.selectEventType);var t=JSON.parse(r);var v=null;var w=null;if(z!=null){v=JSON.parse(z)}if(u!=null){w=JSON.parse(u)}if(q!=null&&p!=null&&y!=null){MultiMarketsHandler.appendGameHeadPin(q,p,y,x)}LiveScoreHandler.appendScoresByEventType(x,t,v,w,s)};LiveScoreHandler.appendScoresByEventType=function(s,t,p,r,q){if(EventType.CRICKET.unique()==PageConfig.selectEventType){LiveScoreHandler.appendCricketScores(s,t)}else{if(EventType.TENNIS.unique()==PageConfig.selectEventType){LiveScoreHandler.appendTennisScores(s,t,p)}else{if(EventType.SOCCER.unique()==PageConfig.selectEventType){LiveScoreHandler.appendSoccerScores(s,t,p,r,q)}}}};LiveScoreHandler.cleanBox=function(r){var s=r.find("[name=extended]");if(s==null||s.length==0){return}for(var p=0;p<s.length;p++){var q=$j(s[p]);if(q.attr("eventId")!=null&&q.attr("eventId")!=PageConfig.selectEventId){q.remove()}}};LiveScoreHandler.appendCricketScores=function(x,p){if(x.attr("eventId")!=PageConfig.selectEventId){LiveScoreHandler.cleanBox($j("#cricketScoreBoard"));l(x)}var u=p.currentSet;var t=p.home;var q=p.away;var v=x.find("#teamHome");var s=x.find("#teamAway");if(t.name!=null&&q.name!=null){if(t.name!="HOME"){v.html(t.name)}if(q.name!="AWAY"){s.html(q.name)}}var w=p.description;var r=p.currentDay;x.find("#description").html(w);x.find("#currentDay").html(I18N.get("liveScore.cricket.day")+" "+r);h(t,"#runsHome",u);h(q,"#runsAway",u)};function h(p,t,w){for(var v=1;v<=w;v++){var x=$j("#inningsBox"+v);if(x.length==0){x=a(v)}var q=x.find(t);var r=p["inning"+v];var s=p.highlight;q.removeClass("scores-now");if(r!=null){x.show();var z=r.overs;var u=r.runs;var y=r.wickets;if("ALL_OUT"==y){q.html(u+"&nbsp<span>("+z+")</span>")}else{q.html(u+"/"+y+"&nbsp<span>("+z+")</span>");if(s==true){q.addClass("scores-now")}}}else{q.html(I18N.get("liveScore.cricket.yetToBat"))}}}function l(s){var r=s.find("[id^=inningsBox]");for(var q=0;q<r.length;q++){var p=$j(r[q]);p.find("#runsHome").html("");p.find("#runsAway").html("")}s.attr("eventId",PageConfig.selectEventId)}function a(q){var p=JsCache.clone("#inningsBoxTemplate");p.attr("id","inningsBox"+q).attr("eventId",PageConfig.selectEventId).attr("name","extended");p.find("#inningsIndex").html(I18N.get("liveScore.cricket.innings")+" "+q);JsCache.get("#inningsBox"+(parseInt(q)-1)).after(p.show());return p}LiveScoreHandler.appendTennisScores=function(K,I,u){if(K.attr("eventId")!=PageConfig.selectEventId){LiveScoreHandler.cleanBox($j("#tennisScoreBoard"));m(K)}var N=I.home;var H=I.away;var z=K.find("#teamHome");var w=K.find("#teamAway");var C=N.playerSeed;var D=H.playerSeed;var B="";var p="";var L='<span class="rank">(';var F=")</span>";var M='&nbsp<img class="its_turn" src="/images/transparent.gif">';if(C!=null){B=L+C+F}if(D!=null){p=L+D+F}if(N.name!=null&&H.name!=null){z.html(N.name+B);w.html(H.name+p);if(N.isServing==true){z.html(N.name+B+M)}else{if(H.isServing==true){w.html(H.name+p+M)}}}var v=I.matchStatus;var s=I.currentSet;if(s==null){s=1}var J=K.find("#currentSet");if("Suspended"==v){J.html(I18N.get("liveScore.tennis.stopped"))}else{if("Oncourt"==v){J.html(I18N.get("liveScore.tennis.oncourt"))}else{J.html(I18N.get("liveScore.tennis.set")+" "+s)}}var y=K.find("#fullTimeElapsed");var t=I.fullTimeElapsed;y.html(t.hour+"h"+t.min);if(u!=null&&u.surface!=null&&u.surface!=""){K.find("#court").html(u.surface+" court")}var q=N.gameSequence;var A=H.gameSequence;j(q,"#setHome");j(A,"#setAway");var E=$j("#setBox"+s);if(E.length==0){E=o(s)}E.find("#setHome").html(N.games).addClass("scores-now");E.find("#setAway").html(H.games).addClass("scores-now");var O=K.find("#points");O.find("#pointsHome").html(N.score);O.find("#pointsAway").html(H.score);var x=K.find("#aces");x.find("#acesHome").html(N.aces);x.find("#acesAway").html(H.aces);var G=K.find("#faults");G.find("#faultsHome").html(N.doubleFaults);G.find("#faultsAway").html(H.doubleFaults);var r=K.find("#breaks");r.find("#breaksHome").html(N.serviceBreaks);r.find("#breaksAway").html(H.serviceBreaks)};function m(v){var q=v.find("[id^=setBox]");for(var r=0;r<q.length;r++){var t=$j(q[r]);t.find("#setHome").html("").removeClass("scores-now");t.find("#setAway").html("").removeClass("scores-now")}v.find("#court").html("");var u=v.find("#points");u.find("#pointsHome").html(0);u.find("#pointsAway").html(0);var p=v.find("#aces");p.find("#acesHome").html(0);p.find("#acesAway").html(0);var s=v.find("#faults");s.find("#faultsHome").html(0);s.find("#faultsAway").html(0);var w=v.find("#breaks");w.find("#breaksHome").html(0);w.find("#breaksAway").html(0);v.attr("eventId",PageConfig.selectEventId)}function o(p){var q=JsCache.clone("#setBoxTemplate");q.attr("id","setBox"+p).attr("eventId",PageConfig.selectEventId).attr("name","extended").addClass("last-box");q.find("#setIndex").html(p);JsCache.get("#setBox"+(parseInt(p)-1)).removeClass("last-box").after(q.show());return q}function j(t,p){for(var r in t){var q=parseInt(r)+1;var s=$j("#setBox"+q);if(s.length==0){s=o(q)}var u=s.find(p);u.html(t[r]);u.removeClass("scores-now")}}LiveScoreHandler.appendSoccerScores=function(B,r,w,y,q){if(B.attr("eventId")!=PageConfig.selectEventId){i(B)}var x=r.home;var t=r.away;var z=B.find("#teamHome");var v=B.find("#teamAway");z.html(x.name);v.html(t.name);var s=B.find("#vsScores");var p=B.find("#timeElapsed");var C=B.find("#progressPercent");var u=g(q);s.html(x.score+" - "+t.score);p.html(q+"'");C.css("width",u);var A=k(B,r,y);if(A!=0){u=g(A);p.html("Half-time");C.css("width",u)}};function i(p){p.find("[id^=soccerEvent_]").remove();p.find("[id^=popup_]").remove();p.find("#progressPercent").css("width","0%");p.attr("eventId",PageConfig.selectEventId)}function k(A,r,x){var y=0;var w=new HashMap();for(var s=0;s<x.length;s++){var t=x[s];var v=t.type;var p=t.elapsedRegularTime;if("Goal"!=v&&"YellowCard"!=v&&"RedCard"!=v&&"FirstHalfEnd"!=v){continue}if("FirstHalfEnd"==v){if(p!=null&&s==(x.length-1)){y=p}continue}var q=t.team;var z=q+"_"+p;var u=w.get(z);if(u==null){u=[]}u.push(t);w.put(z,u)}f(A,w);return y}function f(C,w){var s=w.values();for(var D in s){var v=s[D];var H=v[0];var u=H.elapsedRegularTime;var x=H.elapsedAddedTime;var F=H.team;var t=H.type;var A=H.teamName;var y=F=="home"?"team-a":"team-b";var r=g(u);if(v.length>1){var I=F+"_"+u;var B=C.find("#sum_"+I);var G=C.find("#sumPopup_"+I);if(B.length==0){B=b(C,I,v,r,y)}B.html(v.length);e(G,v,y)}else{var p="";var E=F+"_"+t+"_"+u;var q=C.find("#soccerEvent_"+E);var z=C.find("#popup_"+E);if(q.length==0||z.length==0){q=C.find("#soccerEventTemplate").clone();q.attr("id","soccerEvent_"+E);z=C.find("#popupTemplate").clone();z.attr("id","popup_"+E);p=d(t);n(q,z,A,p,y,r,u,x);C.find("#progressPercent").after(q);C.find("#progressPercent").after(z)}}}}function n(r,u,w,p,t,s,q,v){r.addClass(p);r.addClass(t);c(r,s);r.show();u.find("img").addClass(p);u.find("img").addClass(t);u.find("img").after(w);if(v!=null){u.find("#matchTime").html(q+"+"+v+"'")}else{u.find("#matchTime").html(q+"'")}c(u,s);if(t=="team-b"){u.addClass(t)}r.hover(function(){u.show()});r.mouseleave(function(){u.hide()})}function b(u,p,v,q,s){var r=u.find("#sumTemplate").clone();r.attr("id","sum_"+p);r.addClass(s);c(r,q);r.show();var t=u.find("#sumPopupTemplate").clone();t.attr("id","sumPopup_"+p);c(t,q);if(s=="team-b"){t.addClass(s)}u.find("#progressPercent").after(r);u.find("#progressPercent").after(t);r.hover(function(){t.show()});r.mouseleave(function(){t.hide()});return r}function e(z,y,p){var v=z.find("#list");for(var u in y){var w=y[u];var r=w.team;var q=w.elapsedRegularTime;var D=w.elapsedAddedTime;var A=w.type;var C=w.teamName;var B=d(A);var E=w.updateId;var t=r+"_"+A+"_"+E;var s=z.find("#matchTime_"+t);if(s.length==0){s=z.find("#matchTimeTemplate").clone();s.attr("id","matchTime_"+t);if(D!=null){s.html(q+"+"+D+"'")}else{s.html(q+"'")}s.show();var x=z.find("#iconTemplate").clone();x.attr("id","icon_"+t);x.find("img").addClass(B);x.find("img").addClass(p);x.find("img").after(C);x.show();v.append(s);v.append(x)}}}function d(p){if("Goal"==p){return"icon-soccer"}else{if("YellowCard"==p){return"icon-card-yellow"}else{if("RedCard"==p){return"icon-card-red"}}}}function g(r){var p=MathUtil.decimal.divide(r,90);if(p>1){p=1}var q=MathUtil.decimal.multiply(p,100);return Math.round(q)+"%"}function c(p,q){if("100%"==q){p.css("left","");p.css("right","0%")}else{p.css("left",q);p.css("right","")}}})();