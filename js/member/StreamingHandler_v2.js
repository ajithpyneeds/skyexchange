if(typeof(StreamingHandler)=="undefined"){StreamingHandler={}}(function(){var g={};g.urlIndex=0;g.playUrlObjList=[];var d=false;var c=null;StreamingHandler.init=function(){g.playUrlObjList=StreamingUtil.getPlayUrlObjList(PageConfig.country);$j("#openStreaming, #lmtOpenStreaming").on("click",function(){if(typeof(LoginHandler)!="undefined"&&!LoginHandler.userIsLogin()){return}if(PageConfig.streamingChannel==null||PageConfig.streamingChannel=="null"||PageConfig.streamingChannel=="0"){return}if(g.playerObj==null){StreamingHandler.openStreamingBox(PageConfig.streamingChannel,PageConfig.selectEventType);PageConfig.userCloseStreaming=false}});$j("#closeStreamingBox").on("click",function(){StreamingHandler.closeStreamingBox();PageConfig.userCloseStreaming=true});$j("#changeLineBtn").on("click",function(){StreamingUtil.changeLine(g,f)});$j("#tv-wrap").on("mouseenter",function(){a(true)});$j("#tv-wrap").on("mouseleave",function(){a(false)});$j("#mute").on("click",function(){if(!g.mute){StreamingUtil.mute(g,true)}else{StreamingUtil.mute(g,false)}});StreamingHandler.hideTvControl()};function b(i,h){Trace.error("Id:["+i+"] HLS on Error:["+h+"] to do change line!!");if(g.playerObj!=null){StreamingUtil.changeLine(g,f)}}function e(){if(!g.playerObj){g.initStreaming=setTimeout(function(){if(d){Trace.info("["+DateUtil.format(new Date(),"yyyy/MM/dd hh:mm:ss")+"] setTimeout streamingObj.initStreaming 100")}e()},100);return}else{if(g.initStreaming){clearTimeout(g.initStreaming)}var h=$j("#tv-wrap");g.video=$j("#video");$j(g.video).attr("height",$j(h).height());$j(g.video).attr("width",$j(h).width());StreamingUtil.setPlayerChannel(g,g.channel,g.eventType,f)}}function f(){$j("#tvLine").html(g.urlIndex+1)}function a(h){if(h){$j("#closeStreamingBox").fadeIn();$j("#mute").fadeIn();$j("#changeLineBtn").fadeIn()}else{$j("#closeStreamingBox").fadeOut();$j("#mute").fadeOut();$j("#changeLineBtn").fadeOut()}}StreamingHandler.update=function(j,h,i){var k=$j("#tv-wrap");if(!k){return}k.fadeIn();if(!g.playerObj){StreamingUtil.initPlayerObj(g,j,h,i,b,e,PageConfig.userID)}if(g.playerObj&&j&&g.channel!=j){StreamingUtil.setPlayerChannel(g,j,h,f);g.channel=j;g.eventType=h;StreamingUtil.setPlayerMaxSeekSec(g)}if(!g.mute){$j("#mute").attr("class","btn-volume_on")}else{$j("#mute").attr("class","btn-volume_off")}};StreamingHandler.openStreamingBox=function(j,i){if(!PageConfig.hasAccount){$j("#tv-wrap").fadeOut();return}$j("#lmtOpenStreaming").show();$j("#openStreaming").show();$j("#tv-wrap").fadeIn();if(j!=null&&i!=null){StreamingHandler.update(j,i)}var h=$j("#video");h.autoplay=true;h.load()};StreamingHandler.closeStreamingBox=function(){$j("#tv-wrap").fadeOut();StreamingUtil.stopVideo(g)};StreamingHandler.hideTvControl=function(){a(true);if(c!=null){clearTimeout(c)}c=setTimeout(function(){a(false)},5000)}})();